agent:
  system_template: |
    You are a helpful assistant that can interact with a computer shell to solve programming tasks.
  instance_template: |
    <pr_description>
    Consider the following PR description:
    {{task}}
    </pr_description>

    <instructions>
    # Task Instructions

    ## Overview
    You're a software engineer interacting continuously with a computer by submitting commands.
    You'll be helping implement necessary changes to meet requirements in the PR description.
    Your task is specifically to make changes to non-test files in the current directory in order to fix the issue described in the PR description in a way that is general and consistent with the codebase.

    ## Important Boundaries
    - MODIFY: Regular source code files in /testbed (this is the working directory for all your subsequent commands)
    - DO NOT MODIFY: Tests, configuration files (pyproject.toml, setup.cfg, etc.)

    ## Recommended Workflow
    1. Analyze the codebase by finding and reading relevant files
    2. Create a script to reproduce the issue
    3. Edit the source code to resolve the issue
    4. Verify your fix works by running your script again
    5. Test edge cases to ensure your fix is robust

    ## Important Rules
    1. Directory or environment variable changes are not persistent. Every action is executed in a new subshell.
       However, you can prefix any action with `MY_ENV_VAR=MY_VALUE cd /path/to/working/dir && ...` or write/load environment variables from files

    ## Environment Details
    - You have a full Linux shell environment
    - Always use non-interactive flags (-y, -f) for commands
    - Avoid interactive tools like vi, nano, or any that require user input
    - If a command isn't available, you can install it

    ## Useful Command Examples

    ### Create a new file:

    ```bash
    cat <<'EOF' > newfile.py
    import numpy as np
    hello = "world"
    print(hello)
    EOF
    ```

    ### Edit files with sed:

    ```bash
    # Replace all occurrences
    sed -i 's/old_string/new_string/g' filename.py

    # Replace only first occurrence
    sed -i 's/old_string/new_string/' filename.py

    # Replace first occurrence on line 1
    sed -i '1s/old_string/new_string/' filename.py

    # Replace all occurrences in lines 1-10
    sed -i '1,10s/old_string/new_string/g' filename.py
    ```

    ### View file content:

    ```bash
    # View specific lines with numbers
    nl -ba filename.py | sed -n '10,20p'
    ```

    ## Submission

    When you've completed your work (reading, editing, testing), and cannot make further progress
    you must submit your changes, that is you must submit a git patch that others can apply.

    To submit output you run a command that prints your desired output followed by an echo sequence that indicates that you are done.

    Example:

    ```bash
    git add <file1> <file2> ... && git diff --cached && echo COMPLETE_TASK_AND_SUBMIT_FINAL_OUTPUT
    ```

    <important>
    You must only add the specific source files you modified to fix the issue.
    Do not submit changes to any of the following files:

    - test files
    - helper scripts or tools that you created
    - installation, build, packaging, configuration, or setup scripts unless they are directly part of the issue you were fixing (assume that the environment is already set up)
    - binary or compiled files

    Do NOT use `git add -A` or `git add .` as this will include unrelated files like compiled code, cache files, or other artifacts.
    </important>

    For example, if you modified `src/module.py` and `src/utils.py`:

    ```bash
    git add src/module.py src/utils.py && git diff --cached && echo COMPLETE_TASK_AND_SUBMIT_FINAL_OUTPUT
    ```

    This command will submit your work.
    You cannot continue working (reading, editing, testing) in any way on this task after submitting.
    </instructions>
  step_limit: 250
  cost_limit: 3.

environment:
  cwd: "/testbed"
  timeout: 60
  env:
    PAGER: cat
    MANPAGER: cat
    LESS: -R
    PIP_PROGRESS_BAR: 'off'
    TQDM_DISABLE: '1'
  environment_class: docker

model:
  action_observation_template: >-
    {% if output.output | length < 10000 -%}
    {{ ({"returncode": output.returncode, "output": output.output} | ({"exception_info": output.exception_info} if output.exception_info else {})) | tojson }}
    {%- else -%}
    {{ ({"returncode": output.returncode, "output_head": output.output[:5000], "output_tail": output.output[-5000:], "elided_chars": output.output | length - 10000, "warning": "Output too long. Use head/tail/sed to view less, or redirect to file."} | ({"exception_info": output.exception_info} if output.exception_info else {})) | tojson }}
    {%- endif -%}
  model_name: "anthropic/claude-sonnet-4-5-20250929"
  model_kwargs:
    drop_params: true
    temperature: 0.0
  format_error_template: |
    Please always provide EXACTLY ONE action in triple backticks, found {{actions|length}} actions.
    If you want to end the task, please issue the following command: `echo COMPLETE_TASK_AND_SUBMIT_FINAL_OUTPUT`
    without any other command.
    Else, please format your response exactly as follows:

    <response_example>
    Here are some thoughts about why you want to perform the action.

    ```mswea_bash_command
    <action>
    ```
    </response_example>

    Note: In rare cases, if you need to reference a similar format in your command, you might have
    to proceed in two steps, first writing TRIPLEBACKTICKSBASH, then replacing them with ```mswea_bash_command.
